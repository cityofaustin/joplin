{% extends "wagtailadmin/base.html" %}
{% load staticfiles wagtailadmin_tags %}
{% load i18n %}
{% load render_bundle from webpack_loader %}

{% block branding_logo %}
{% endblock %}

{% block js %}


{{ block.super }}


<script>
// passing the constant from context_processors into a JS variable (boolean)
const ISPRODUCTION = '{{ISPRODUCTION}}';
</script>
{% render_bundle 'admin' %}
{% if ISPRODUCTION == False %}
  {% render_bundle 'theme' %}
{% endif %}
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans&display=swap" rel="stylesheet">
{% include 'session_security/all.html' %}
<div class="header coa-header">
    <div>
        <img class="coa-seal wagtail-logo wagtail-logo__full" src="{% static 'images/coa_seal_transparent_color.png' %}" alt="Welcome to City of Austin CMS" width="60" />
        <div class="coa-easter-egg" onclick="toggleJoplinUI()"></div>
    </div>
    <div class="dropdown user-account coa-user-options-dropdown">
        <div class="dropdown-toggle">
          <div class="user-account">
            <div class="avatar circle"><img src="{% avatar_url user %}" alt="avatar" /></div>
            <div class="user user-account-dropdown coa-user" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                {{ request.user.first_name }} {{ request.user.last_name }}
                <span class="icon icon-arrow-down-after"></span>
                <ul class="user-account-dropdown-menu" aria-labelledby="user-account-dropdown">
                    <li><a href="{% url 'wagtailadmin_account' %}" class="icon icon-user">{% trans "Account settings" %}</a></li>
                    <li><a href="{% url 'wagtailadmin_logout' %}" class="icon icon-logout">{% trans "Log out" %}</a></li>
                </ul>
            </div>
            </div>
        </div>
    </div>
</div>
<script onclick="toggleJoplinUI">

const toggleJoplinUI = function() {
  console.log('yo yo yo')
  if (localStorage.joplinUI === 'on') {
    localStorage.joplinUI = 'off'
  } else {
    localStorage.joplinUI = 'on'
  }
  console.log("new Joplin UI is " + localStorage.joplinUI)
  window.location.reload()
}

</script>
{% endblock %}
